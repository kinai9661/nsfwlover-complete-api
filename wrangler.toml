# Cloudflare Pages / Workers 配置文件
# 用於部署圖片生成 API 輸出站
# 支援 ZImage Turbo 和 Flux2Klein 模型
# 支援 API Key 認證和多種生圖參數

name = "nsfwlover-complete-api"
compatibility_date = "2024-01-01"

# Pages 配置
[pages]
project_name = "image-api-dashboard"
production_branch = "main"

# 資源目錄配置（靜態網站）
[assets]
directory = "./"
# 靜態網站無需構建命令

# 環境變量 - API 端點配置
[vars]
# ZImage Turbo 模型端點（快速生成）
ZIMAGE_TURBO_ENDPOINT = "https://www.nsfwlover.com/api/image/generation/zimage-turbo"
# Flux2Klein 模型端點（高品質生成）
FLUX2KLEIN_ENDPOINT = "https://www.nsfwlover.com/api/image/generation/flux2klein"
# 預設模型
DEFAULT_MODEL = "zimage-turbo"
# 預設 CFG Scale
DEFAULT_CFG_SCALE = "7.5"
# 預設生成數量
DEFAULT_NUM_IMAGES = "1"
# 預設採樣器
DEFAULT_SAMPLER = "dpmpp_2m"
# 預設調度器
DEFAULT_SCHEDULER = "normal"

# 預覽環境配置
[env.preview]
name = "image-api-dashboard-preview"

# 生產環境配置
[env.production]
name = "image-api-dashboard-prod"

# 頭部配置 - 允許跨域請求
[[headers]]
for = "/*"
[headers.values]
Access-Control-Allow-Origin = "*"
Access-Control-Allow-Methods = "GET, POST, OPTIONS"
Access-Control-Allow-Headers = "Content-Type, Authorization"
X-Content-Type-Options = "nosniff"
X-Frame-Options = "DENY"
X-XSS-Protection = "1; mode=block"
